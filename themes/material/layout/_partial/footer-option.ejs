<% if(theme.leancloud.enable === true) { %>
    <!-- Leancloud -->
    <script src="<%= theme.leancloud.av_core_mini %>"></script>
    <script>
        AV.initialize('<%= theme.leancloud.app_id %>', '<%= theme.leancloud.app_key %>');
    </script>
    <%- partial('_widget/leancloud-views') %>
<% } %>

<% if(theme.busuanzi.enable === true) { %>
    <!-- Busuanzi -->
    <script src="<%= theme.busuanzi.busuanzi_pure_mini_js %>"></script>
<% } %>

<% if(theme.comment.use === 'duoshuo') { %>
    <!-- 多说公共 js 代码 start -->
    <script type="text/javascript">
        queue.offer(function(){
            var duoshuoQuery = {
                short_name: '<%= theme.comment.shortname %>'
            };
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';
                ds.async = true;
                ds.src = '<%= theme.comment.duoshuo_embed_js_url %>';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                 || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        });
    </script>
    <!-- 多说公共 js 代码 end -->
<% } %>
<% if(theme.comment.use == "changyan"){ %>
    <!-- 畅言公共 js 代码 start -->
		<script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=<%=theme.comment.changyan_appid%>">
</script>
    <!-- 畅言公共 js 代码 end -->
<% } %>

<% if(theme.comment.use === 'disqus') { %>
    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//<%= theme.comment.shortname %>.disqus.com/count.js" async></script>
<% } %>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<% if(theme.materialcdn.use === true) { %>
    <!--<script src="<%= theme.materialcdn.base %>/js/mathjax.js"></script>-->
	<script charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<%}else{%>
    <script type="text/javascript" src="/js/mathjax.js"></script>
<%}%>
